"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,o=Array(t.length);e<t.length;e++)o[e]=t[e];return o}return Array.from(t)}var todo=function(){function t(t){r.innerHTML="",u.forEach(function(t){"edit"!==t.status?r.innerHTML+='<li class="list-group-item'+("complete"===t.status?" is-complete":"")+'" data-todo="item">\n            <label class="form-check-label" data-todo="checkmark">\n              <input class="form-check-input" type="checkbox" '+("complete"===t.status?"checked":"")+' value="" data-todo="checkmark">'+t.title+"\n            </label>\n            "+("complete"===t.status?'<button class="btn btn-sm btn-danger" data-todo="delete">Delete</button>':'<button class="btn btn-sm btn-default" data-todo="edit">edit</button>')+"\n          </li>":r.innerHTML+='<li class="list-group-item edit" data-todo="item-edit">\n          <input class="form-control" data-todo="edit-item" type="text" value="'+t.title+'">\n          <button class="btn btn-sm btn-default" data-todo="cancel">Cancel</button>\n          <button class="btn btn-sm btn-success" data-todo="update">Update</button>\n          <button class="btn btn-sm btn-danger" data-todo="delete">Delete</button>\n        </li>'}),void 0!==t&&r.children[t].querySelector('[data-todo="edit-item"]').select()}function e(t){var e=new XMLHttpRequest;e.open("GET","/",!0),e.onload=function(){this.status>=200&&this.status<400&&(u=JSON.parse(this.response),t())},e.send()}function o(e){if(e=e||c.value){var o=new XMLHttpRequest;o.open("POST","/TEMP?title="+e+"&status=open",!0),o.onload=function(){this.status>=200&&this.status<400&&console.log(JSON.parse(this.response))},o.send(),u.unshift({title:e,status:"open"}),c.value="",t()}else alert("Please enter a todo item.")}function a(e){u[e].status="open"===u[e].status?"complete":"open",t()}function n(e){u[e].status="edit",t(e)}function s(e){u[e].status="open",t()}function d(e){u[e].title=r.children[e].querySelector('[data-todo="edit-item"]').value,u[e].status="open",t()}function i(e,o){var a=new XMLHttpRequest;a.open("DELETE","/api/todos/"+o,!0),a.onload=function(){this.status>=200&&this.status<400},a.send(),u.splice(e,1),t()}var l=document.getElementById("todo"),r=l.querySelector('[data-todo="list"]'),c=l.querySelector('[data-todo="add-item"]'),u=[];return l.addEventListener("click",function(t){var e=[].concat(_toConsumableArray(r.children)).indexOf(t.target.closest('[data-todo="item"]')||t.target.closest('[data-todo="item-edit"]')),l=e>0?u[e]._id:null,c=t.target.getAttribute("data-todo");"edit"===c?n(e):"delete"===c?i(e,l):"add"===c?o():"cancel"===c?s(e):"update"===c?d(e):"checkmark"===c&&a(e)}),l.addEventListener("keydown",function(t){if(13===t.keyCode){var e=t.target.getAttribute("data-todo");if("add-item"===e)o();else{var a=[].concat(_toConsumableArray(r.children)).indexOf(t.target.closest('[data-todo="item"]')||t.target.closest('[data-todo="item-edit"]'));"edit-item"===e&&d(a)}}}),l.addEventListener("keyup",function(t){if(27===t.keyCode){var e=t.target.getAttribute("data-todo"),o=[].concat(_toConsumableArray(r.children)).indexOf(t.target.closest('[data-todo="item"]')||t.target.closest('[data-todo="item-edit"]'));"edit-item"===e&&s(o)}}),e(t),{addTodo:o,completeTodo:a,editTodo:n,cancelTodo:s,updateTodo:d,deleteTodo:i}}();Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(t){for(var e=this;e;){if(e.matches(t))return e;e=e.parentElement}});
//# sourceMappingURL=todo.js.map
