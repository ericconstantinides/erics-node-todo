"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,o=Array(t.length);e<t.length;e++)o[e]=t[e];return o}return Array.from(t)}var todo=function(){function t(t){console.log(u),c.innerHTML="",u.forEach(function(t){"edit"!==t.status?c.innerHTML+='<li class="list-group-item'+("complete"===t.status?" is-complete":"")+'" data-todo="item">\n            <label class="form-check-label" data-todo="checkmark">\n              <input class="form-check-input" type="checkbox" '+("complete"===t.status?"checked":"")+' value="" data-todo="checkmark">'+t.title+"\n            </label>\n            "+("complete"===t.status?'<button class="btn btn-sm btn-danger" data-todo="delete">Delete</button>':'<button class="btn btn-sm btn-default" data-todo="edit">edit</button>')+"\n          </li>":c.innerHTML+='<li class="list-group-item edit" data-todo="item-edit">\n          <input class="form-control" data-todo="edit-item" type="text" value="'+t.title+'">\n          <button class="btn btn-sm btn-default" data-todo="cancel">Cancel</button>\n          <button class="btn btn-sm btn-success" data-todo="update">Update</button>\n          <button class="btn btn-sm btn-danger" data-todo="delete">Delete</button>\n        </li>'}),void 0!==t&&c.children[t].querySelector('[data-todo="edit-item"]').select()}function e(t){var e=new XMLHttpRequest;e.open("GET","/todos",!0),e.onload=function(){this.status>=200&&this.status<400&&(u=JSON.parse(this.response),t())},e.send()}function o(e){if(e=e||r.value){var o=u.length;u.push({title:e,status:"open"});var n=new XMLHttpRequest,a={title:e,status:"open"};n.open("POST","/todos",!0),n.onload=function(){this.status>=200&&this.status<400&&(u[o]._id=JSON.parse(this.response)._id)},n.setRequestHeader("Content-Type","application/json"),n.send(JSON.stringify(a)),r.value="",t()}else alert("Please enter a todo item.")}function n(e,o){u[e].status="open"===u[e].status?"complete":"open";var n={title:u[e].title,status:u[e].status},a=new XMLHttpRequest;a.open("PUT","/todos/"+o,!0),a.onload=function(){this.status>=200&&this.status<400&&console.log("success")},a.setRequestHeader("Content-Type","application/json"),a.send(JSON.stringify(n)),t()}function a(e){u[e].status="edit",t(e)}function s(e){u[e].status="open",t()}function d(e,o){u[e].title=c.children[e].querySelector('[data-todo="edit-item"]').value,u[e].status="open";var n={title:u[e].title,status:u[e].status},a=new XMLHttpRequest;a.open("PUT","/todos/"+o,!0),a.onload=function(){this.status>=200&&this.status<400&&console.log("success")},a.setRequestHeader("Content-Type","application/json"),a.send(JSON.stringify(n)),t()}function i(e,o){var n=new XMLHttpRequest;n.open("DELETE","/todos/"+o,!0),n.onload=function(){this.status>=200&&this.status<400},n.send(),u.splice(e,1),t()}var l=document.getElementById("todo"),c=l.querySelector('[data-todo="list"]'),r=l.querySelector('[data-todo="add-item"]'),u=[];return l.addEventListener("click",function(t){var e=[].concat(_toConsumableArray(c.children)).indexOf(t.target.closest('[data-todo="item"]')||t.target.closest('[data-todo="item-edit"]')),l=e>0?u[e]._id:null,r=t.target.getAttribute("data-todo");"edit"===r?a(e):"delete"===r?i(e,l):"add"===r?o():"cancel"===r?s(e):"update"===r?d(e,l):"checkmark"===r&&n(e,l)}),l.addEventListener("keydown",function(t){if(13===t.keyCode){var e=t.target.getAttribute("data-todo");if("add-item"===e)o();else{var n=[].concat(_toConsumableArray(c.children)).indexOf(t.target.closest('[data-todo="item"]')||t.target.closest('[data-todo="item-edit"]'));"edit-item"===e&&d(n)}}}),l.addEventListener("keyup",function(t){if(27===t.keyCode){var e=t.target.getAttribute("data-todo"),o=[].concat(_toConsumableArray(c.children)).indexOf(t.target.closest('[data-todo="item"]')||t.target.closest('[data-todo="item-edit"]'));"edit-item"===e&&s(o)}}),e(t),{addTodo:o,completeTodo:n,editTodo:a,cancelTodo:s,updateTodo:d,deleteTodo:i}}();Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(t){for(var e=this;e;){if(e.matches(t))return e;e=e.parentElement}});
//# sourceMappingURL=todo.js.map
